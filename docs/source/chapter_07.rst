–ì–ª–∞–≤–∞ 7. –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —è–∑—ã–∫–∞ –≤ Aiogram
-----------------------------------------------------------------

–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–∏–º–µ—Ä
~~~~~~~~~~~~~~~~~~~

–¢–µ–ø–µ—Ä—å –º—ã –∑–Ω–∞–µ–º, –∫–∞–∫ –ø—Ä–æ–≤–æ–¥–∏—Ç—Å—è –∏–Ω—Ç–µ—Ä–Ω–∞—Ü–∏–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è –∏ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è
–ø—Ä–æ–¥—É–∫—Ç–∞. –ù–æ –Ω–∞–º –±—ã —Ö–æ—Ç–µ–ª–æ—Å—å —ç—Ç–æ –≤—Å–µ –≤–Ω–µ–¥—Ä–∏—Ç—å –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–∞—à–µ–≥–æ
–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–µ Aiogram, —á—Ç–æ–±—ã –ø–æ–≤—ã—Å–∏—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ UX (user
experience).

–ü—Ä–∏–º–µ—Ä –±—É–¥–µ—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω —Å –ø–æ–º–æ—â—å—é Fluent, –ø–æ—Å–∫–æ–ª—å–∫—É gettext —É–∂–µ –∏–∑—É—á–µ–Ω –∏
–ø–æ —Ñ–∞–∫—Ç—É —è–≤–ª—è–µ—Ç—Å—è –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω—ã–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–æ–º. –ê –Ω–∞–º —Ö–æ—á–µ—Ç—Å—è –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å
—á—Ç–æ-—Ç–æ –Ω–æ–≤–æ–µ.

–°–ø—Ä–æ–µ–∫—Ç–∏—Ä—É–µ–º –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º.

1. –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–ø–µ—Ä–≤—ã–µ –Ω–∞—á–∞–ª –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å –±–æ—Ç–æ–º, —Ç–æ –º—ã –Ω–µ
   –∑–Ω–∞–µ–º –Ω–∞ –∫–∞–∫–æ–º —è–∑—ã–∫–µ –æ–Ω –≥–æ–≤–æ—Ä–∏—Ç. –ü–æ–ø—ã—Ç–∞–µ–º—Å—è –ø–æ–ª—É—á–∏—Ç—å —è–∑—ã–∫
   –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ –∞–ø–¥–µ–π—Ç–∞. –ù–æ —ç—Ç–∞ –æ–ø—Ü–∏—è –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞ Telegram,
   –∫–æ—Ç–æ—Ä—ã–º –ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, –∏ —á–∞—Å—Ç–æ —ç—Ç–æ –ø–æ–ª–µ –Ω–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–æ. –í
   —Ç–∞–∫–æ–º —Å–ª—É—á–∞–µ –æ—Ç–¥–∞–¥–∏–º –∫–∞–∫–æ–π-—Ç–æ —è–∑—ã–∫ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –Ω–∞–ø—Ä–∏–º–µ—Ä,
   –∞–Ω–≥–ª–∏–π—Å–∫–∏–π.

2. –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±—Ä–∞–ª –≤ –º–µ–Ω—é –±–æ—Ç–∞ –∏–ª–∏ –æ—Ç–ø—Ä–∞–≤–∏–ª –∫–æ–º–∞–Ω–¥—É –≤—ã–±–æ—Ä–∞
   —è–∑—ã–∫–∞, —Ç–æ —Å–æ—Ö—Ä–∞–Ω–∏–º —è–∑—ã–∫ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –∏ –ø–µ—Ä–µ–∫–ª—é—á–∏–º —è–∑—ã–∫. –í
   –¥–∞–ª—å–Ω–µ–π—à–µ–º, –ø—Ä–∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–∏, –±—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —è–∑—ã–∫ –∏–∑ –±–∞–∑—ã
   –¥–∞–Ω–Ω—ã—Ö.

3. –ù–∞–º –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –ø–µ—Ä–µ–≤–æ–¥—ã –¥–ª—è –≤—Å–µ—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞, –≤–∫–ª—é—á–∞—è
   —Å–æ–æ–±—â–µ–Ω–∏—è, –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã, –º–µ–Ω—é, –∞–ª–µ—Ä—Ç—ã.

4. –í –∫–∞–∫–∏—Ö-—Ç–æ —Å–ª—É—á–∞—è—Ö –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –∫–∞—Ä—Ç–∏–Ω–æ–∫ –∏–ª–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ ‚Äî
   –ª–æ–∫–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫–∞—Ä—Ç–∏–Ω–∫–∏ –∏–ª–∏ –¥–æ–∫—É–º–µ–Ω—Ç—ã.

–í —É—á–µ–±–Ω—ã—Ö —Ü–µ–ª—è—Ö –º—ã —Ä–µ–∞–ª–∏–∑—É–µ–º —Å–ª–µ–¥—É—é—â–∏–µ –≤–µ—â–∏:

-  –ù–∞—à –±–æ—Ç –±—É–¥–µ—Ç —Å—Ç–∞—Ä—Ç–æ–≤–∞—Ç—å –ø–æ –∫–æ–º–∞–Ω–¥–µ ``/start``
-  –≤—ã–≤–æ–¥–∏—Ç—å —Ç–µ–∫—Å—Ç –ø–æ–º–æ—â–∏ –ø–æ –∫–æ–º–∞–Ω–¥–µ ``/help`` –∏–ª–∏ –ø–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ª–æ–≤–∞
   ``–ø–æ–º–æ—â—å`` –∏–ª–∏ ``help``, –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–µ–∫—É—â–µ–≥–æ —è–∑—ã–∫–∞.
-  –û—Ç–¥–∞–≤–∞—Ç—å –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É –Ω–∞ –Ω—É–∂–Ω–æ–º —è–∑—ã–∫–µ.
-  –ü–æ –∫–æ–º–∞–Ω–¥–µ ``/languge_en`` –∏ ``/languge_ru`` –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å—Å—è –Ω–∞
   —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π —è–∑—ã–∫.
-  –ü–æ –∫–æ–º–∞–Ω–¥–µ ``/photo`` –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –∫–∞—Ä—Ç–∏–Ω–∫—É, –ø–µ—Ä–µ–≤–µ–¥–µ–Ω–Ω—É—é –Ω–∞ —Ç–µ–∫—É—â–∏–π
   —è–∑—ã–∫.

–ù–∞–º –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö, –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —è–∑—ã–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –í –∫–æ–¥–µ
–±—É–¥–µ—Ç –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø—Ä–∏–º–µ—Ä, –ø—Ä–æ—Å—Ç–æ "—á—Ç–æ–± —Ä–∞–±–æ—Ç–∞–ª–æ", –∞ —Ç–∞–∫–∂–µ –º–Ω–æ–≥–æ
—Å–æ–æ–±—â–µ–Ω–∏–π –∏ –º–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞. –ù—É –∏, –∫–∞–∫ —Ä–∞–Ω–µ–µ –≥–æ–≤–æ—Ä–∏–ª–æ—Å—å, –±—É–¥–µ—Ç –º–Ω–æ–≥–æ
–¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞ - –∑–¥—Ä–∞–≤—Å—Ç–≤—É–π WET, –ø—Ä–æ—â–∞–π DRY.

–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —á–∞—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞, –æ—Ç–≤–µ—á–∞—é—â–∞—è –∑–∞ –∏–Ω—Ç–µ—Ä–Ω–∞—Ü–∏–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—é –∏
–ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—é, –±—É–¥–µ—Ç –ø—Ä–∏–º–µ—Ä–Ω–æ —Ç–∞–∫–æ–π:

::

   ...
   ‚îú‚îÄ‚îÄ‚îÄdatabase
   ‚îÇ       bot.db
   ‚îÇ       database.py
   ‚îú‚îÄ‚îÄ‚îÄlocales
   ‚îÇ   ‚îú‚îÄ‚îÄ‚îÄen
   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ‚îÄLC_MESSAGES
   ‚îÇ   ‚îÇ   ‚îÇ       messages.ftl
   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ‚îÄstatic
   ‚îÇ   ‚îÇ           bayan_en.jpg
   ‚îÇ   ‚îî‚îÄ‚îÄ‚îÄru
   ‚îÇ       ‚îú‚îÄ‚îÄ‚îÄLC_MESSAGES
   ‚îÇ       ‚îÇ       messages.ftl
   ‚îÇ       ‚îî‚îÄ‚îÄ‚îÄstatic
   ‚îÇ               bayan_ru.jpg
   ‚îî‚îÄ‚îÄ‚îÄmiddlewares
           db_middleware.py
           i18n_middleware.py
   ...

–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö, –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∫ –Ω–µ–π, –ø–∞–ø–∫–∞ —Å –ø–µ—Ä–µ–≤–æ–¥–∞–º–∏ –∏ –ª–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–º–∏
–∫–∞—Ä—Ç–∏–Ω–∫–∞–º–∏, –∏ –¥–≤–∞ –≤–Ω–µ—à–Ω–∏—Ö middleware –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö –∏
–ø–µ—Ä–µ–≤–æ–¥–∞–º–∏.

–ë–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∫ –Ω–µ–π –≤—ã —É–∂–µ –Ω–∞—É—á–∏–ª–∏—Å—å –¥–µ–ª–∞—Ç—å. –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ë–î
–¥–æ–ª–∂–µ–Ω —É–º–µ—Ç—å –¥–æ–±–∞–≤–ª—è—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –ø–æ–ª—É—á–∞—Ç—å –µ–≥–æ —è–∑—ã–∫. –≠—Ç–æ–≥–æ
–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –Ω–∞—à–µ–≥–æ –ø—Ä–∏–º–µ—Ä–∞.

–°–∞–º–æ–µ –≥–ª–∞–≤–Ω–æ–µ, —ç—Ç–æ —Ç–æ, —á—Ç–æ –∫–ª–∞—Å—Å—ã –¥–≤–∏–∂–∫–∞ –ø–µ—Ä–µ–≤–æ–¥–∞, —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –≤
Aiogram, –Ω–µ –ø–æ–∑–≤–æ–ª—è—é—Ç –∏–∑ –∫–æ—Ä–æ–±–∫–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∑–∞–¥—É–º–∞–Ω–Ω—ã–π –Ω–∞–º–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª.
–í –≥–ª–∞–≤–µ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–≤–∏–∂–∫–∞ –ø–µ—Ä–µ–≤–æ–¥–∞ –º—ã —É–∂–µ –ø—Ä–∏–≤–æ–¥–∏–ª–∏ –æ–ø–∏—Å–∞–Ω–∏–µ —ç—Ç–∏—Ö
–∫–ª–∞—Å—Å–æ–≤. –ù–∞–ø–æ–º–Ω—é:

``SimpleI18nMiddleware`` - –≤—ã–±–∏—Ä–∞–µ—Ç –∫–æ–¥ —è–∑—ã–∫–∞ –∏–∑ –æ–±—ä–µ–∫—Ç–∞ User,
–ø–æ–ª—É—á–µ–Ω–Ω–æ–≥–æ –≤ —Å–æ–±—ã—Ç–∏–∏. –û–¥–Ω–∞–∫–æ –Ω–µ –≤—Å–µ –∫–ª–∏–µ–Ω—Ç—ã Telegram –æ—Ç–¥–∞—é—Ç —ç—Ç–æ
–∑–Ω–∞—á–µ–Ω–∏–µ. –û—á–µ–Ω—å —á–∞—Å—Ç–æ –æ–±—ä–µ–∫—Ç language_code –Ω–µ –∑–∞–ø–æ–ª–Ω–µ–Ω –∏ —è–≤–ª—è–µ—Ç—Å—è –ø—É—Å—Ç–æ–π
—Å—Ç—Ä–æ–∫–æ–π.

``ConstI18nMiddleware`` - –≤—ã–±–∏—Ä–∞–µ—Ç —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—É—é –ª–æ–∫–∞–ª—å. –≠—Ç–æ
–Ω–µ –¥–∏–Ω–∞–º–∏—á–Ω–æ –∏ —Å–∫—É—á–Ω–æ.

``FSMI18nMiddleware`` - —Ö—Ä–∞–Ω–∏—Ç –ª–æ–∫–∞–ª—å –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ FSM. –ù–æ —É –Ω–∞—Å –µ–µ —Ç–∞–º
–ø–æ–∫–∞ –Ω–µ—Ç.

–ò —É –Ω–∞—Å –µ—Å—Ç—å —Ç–æ, —á—Ç–æ –Ω—É–∂–Ω–æ: ``I18nMiddleware``. –≠—Ç–æ –±–∞–∑–æ–≤—ã–π –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π
–∫–ª–∞—Å—Å –¥–ª—è –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –∏ —Å–æ–∑–¥–∞–Ω–∏—è —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞.

–°–æ–∑–¥–∞–¥–∏–º –≤ –Ω–∞—à–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –æ–±—ä–µ–∫—Ç —ç—Ç–æ–≥–æ –∫–ª–∞—Å—Å–∞, –∏ –ø–µ—Ä–µ–¥–∞–¥–∏–º —Ç—É–¥–∞ –Ω–∞—à
–∫–∞—Å—Ç–æ–º–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π —Ä–µ–∞–ª–∏–∑—É–µ–º –Ω–∏–∂–µ.

.. code-block:: python

   async def main() -> None:
       ...
       dp = Dispatcher()
       dp.include_router(router)

       i18n = I18nMiddleware(
           core=FluentRuntimeCore(
               path="locales/{locale}/LC_MESSAGES"
           ),

           # –ø–µ—Ä–µ–¥–∞–µ–º –Ω–∞—à –∫–∞—Å—Ç–æ–º–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä —è–∑—ã–∫–∞ –∏–∑ middlewares/i18n_middleware.py
           manager=i18n_middleware.UserManager(),
           default_locale="en")
       ...

–ù–∞—á–Ω–µ–º —Å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–≤–æ–µ–≥–æ –º–µ–Ω–µ–¥–∂–µ—Ä–∞. –°–æ–∑–¥–∞–¥–∏–º —Ñ–∞–π–ª
``middlewares/i18n_middleware.py``.

.. code-block:: python

   from aiogram_i18n.managers import BaseManager
   from aiogram.types.user import User
   from database.database import Database


   class UserManager(BaseManager):
       """
       –°–æ–±—Å—Ç–≤–µ–Ω–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è middleware - –º–µ–Ω–µ–¥–∂–µ—Ä–∞ –¥–ª—è –∏–Ω—Ç–µ—Ä–Ω–∞—Ü–∏–æ–Ω–∞–ª–∏–∑–∞—Ü–∏–∏
       –Ω–∞ –±–∞–∑–µ –∫–ª–∞—Å—Å–∞ BaseManager –∏–∑ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ aiogram_i18n.
       BaseManager –∏–º–µ–µ—Ç –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–µ –º–µ—Ç–æ–¥—ã set_locale –∏ get_locale, –∫–æ—Ç–æ—Ä—ã–µ
       –Ω–∞–º –Ω—É–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å. –ö—Ä–æ–º–µ —Ç–æ–≥–æ, –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –æ–±—ä–µ–∫—Ç–∞ –∫–ª–∞—Å—Å–∞,
       –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è LocaleSetter –∏ LocaleGetter (—Å–º. —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é BaseManager).

       P.S. –í —Å–ª—É—á–∞–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è gettext –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é
       –∫–ª–∞—Å—Å–∞, —Ç–∞–∫ –∫–∞–∫ –Ω–µ gettext –Ω–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–ª–æ—Å—å
       """

       async def get_locale(self, event_from_user: User, db: Database = None) -> str:
           default = event_from_user.language_code or self.default_locale
           if db:
               user_lang = db.get_lang(event_from_user.id)
               if user_lang:
                   return user_lang
           return default
       async def set_locale(self, locale: str, event_from_user: User, db: Database = None) -> None:
           if db:
               db.set_lang(event_from_user.id, locale)

–ü–æ —Å—É—Ç–∏ –º—ã –ø—Ä–æ—Å—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–ª–∏ –¥–≤–∞ –º–µ—Ç–æ–¥–∞:

``get_locale`` ‚Äì –≥–µ—Ç—Ç–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π —Å–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –µ—Å—Ç—å –ª–∏ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∫–∞–∫–æ–π-—Ç–æ —è–∑—ã–∫. –ï—Å–ª–∏ –≤ –±–∞–∑–µ –Ω–∏—á–µ–≥–æ –Ω–µ—Ç, —Ç–æ –ø—ã—Ç–∞–µ—Ç—Å—è
–ø–æ–ª—É—á–∏—Ç—å —è–∑—ã–∫ –∏–∑ –∫–ª–∏–µ–Ω—Ç–∞, –∏ –µ—Å–ª–∏ –∏ –µ–≥–æ –Ω–µ—Ç - –ø—Ä–æ—Å—Ç–æ –æ—Ç–¥–∞–µ—Ç –ª–æ–∫–∞–ª—å
–ø–æ-—É–º–æ–ª—á–∞–Ω–∏—é.

``set_locale`` ‚Äì —Å–µ—Ç—Ç–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ—Å—Ç–æ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç —è–∑—ã–∫ –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö, –∞
–µ—Å–ª–∏ –±–∞–∑—ã –Ω–µ—Ç, —Ç–æ –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ—Ç.

–ï—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ, —ç—Ç—É –ª–æ–≥–∏–∫—É —Ä–∞–±–æ—Ç—ã —Å —è–∑—ã–∫–æ–º –∫–∞–∂–¥—ã–π –ø—Ä–∏–¥—É–º—ã–≤–∞–µ—Ç —Å–µ–±–µ —Å–∞–º –ø–æ–¥
—Å–≤–æ–∏ –∑–∞–¥–∞—á–∏ –∏ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã –∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã (–∫—ç—à,
—Ö—Ä–∞–Ω–∏–ª–∏—â–µ –∏ —Ç.–ø.).

–†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º middleware —Å–Ω–∞—á–∞–ª–∞ –¥–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö, –∞ –∑–∞—Ç–µ–º i18n. –ù–µ
–∑–∞–±—ã–≤–∞–µ–º, —á—Ç–æ —É i18n –µ—Å—Ç—å –º–µ—Ç–æ–¥ .setup(), –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç
—ç—Ç–æ—Ç middleware.

.. code-block:: python

   async def main() -> None:
       ...
       # –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è middleware.
       # –°–Ω–∞—á–∞–ª–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è middleware –¥–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö, —Ç–∞–∫ –∫–∞–∫ —Ç–∞–º —Ö—Ä–∞–Ω–∏—Ç—Å—è —è–∑—ã–∫.
       dp.update.outer_middleware.register(db_middleware.DBMiddleware())

       # –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º i18n middleware
       i18n.setup(dispatcher=dp)
       ...

–°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–ø–∏—à–µ–º –Ω–∞—à–∏ —Ö—ç–Ω–¥–ª–µ—Ä—ã. –ê —É–∂–µ –≤ –∫–æ–Ω—Ü–µ –∑–∞–π–º–µ–º—Å—è –ø–µ—Ä–µ–≤–æ–¥–∞–º–∏.
–ò–º–ø–æ—Ä—Ç—ã:

.. code-block:: python

   from aiogram_i18n import I18nContext, LazyProxy, I18nMiddleware
   from aiogram_i18n.cores.fluent_runtime_core import FluentRuntimeCore

   from aiogram_i18n.types import (
       ReplyKeyboardMarkup, KeyboardButton, ReplyKeyboardRemove
       # you should import mutable objects from here if you want to use LazyProxy in them
   )

–ü–µ—Ä–≤—ã–π —Ö—ç–Ω–¥–ª–µ—Ä –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∫–æ–º–∞–Ω–¥—É ``/start`` –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
–≤ –ë–î. –Ø–∑—ã–∫ –Ω–∞–º –Ω–µ –∏–∑–≤–µ—Å—Ç–µ–Ω, –ø–æ—ç—Ç–æ–º—É –µ–≥–æ –º—ã –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ–º.

.. code-block:: python


   @router.message(CommandStart())
   async def process_start_command(message: Message, i18n: I18nContext, db: Database):
       if not db.get_user(message.from_user.id):
           db.add_user(message.from_user.id, message.from_user.username)
       name = message.from_user.full_name
       await message.answer(text=i18n.get("hello", user=name, language=i18n.locale),
                            reply_markup=rkb
                            )

–°–ª–µ–¥—É—é—â–∏–π —Ö—ç–Ω–¥–ª–µ—Ä –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∫–æ–º–∞–Ω–¥—É ``/help`` –∏ —Å–ª–æ–≤–∞ ``help``,
``Help``, ``–ø–æ–º–æ—â—å``, ``–ü–æ–º–æ—â—å``, –≤–≤–µ–¥–µ–Ω–Ω—ã–µ –Ω–∞ —Ä–æ–¥–Ω–æ–º —è–∑—ã–∫–µ
–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –ü–æ—Å–∫–æ–ª—å–∫—É –Ω–∞ –º–æ–º–µ–Ω—Ç –ø–æ–ø–∞–¥–∞–Ω–∏—è –≤ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é –æ–±—ä–µ–∫—Ç i18n
middleware –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è, —è–∑—ã–∫ –º—ã –Ω–µ –º–æ–∂–µ–º –ø–æ–ª—É—á–∏—Ç—å. –ü–æ—ç—Ç–æ–º—É –∏—Å–ø–æ–ª—å–∑—É–µ–º
–ª–µ–Ω–∏–≤—É—é –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫—É —Ç–µ–∫—Å—Ç–æ–≤ ``LazyProxy``. –ú—É—Ç–∞–±–µ–ª—å–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã, –Ω–∞–ø—Ä–∏–º–µ—Ä
–∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã, –¥–ª—è LazyProxy —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º –Ω–µ –∏–∑ –æ—Å–Ω–æ–≤–Ω–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
aiogram, –∞ –∏–∑ ``aiogram_i18n``.

.. code-block:: python

   @router.message(Command("help"))
   @router.message(F.text == LazyProxy("help", case="capital"))
   @router.message(F.text == LazyProxy("help", case="lower"))
   async def cmd_help(message: Message, i18n: I18nContext) -> Any:
       return message.reply(text=i18n.get("help-message"))

–°–æ–∑–¥–∞–¥–∏–º —Ö—ç–Ω–¥–ª–µ—Ä –¥–ª—è –∫–æ–º–∞–Ω–¥—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–º–µ–Ω—ã —è–∑—ã–∫–∞.

.. code-block:: python

   async def switch_language(message: Message, i18n: I18nContext, locale_code: str):
       await i18n.set_locale(locale_code)
       await message.answer(i18n.get("lang-is-switched"), reply_markup=rkb)


   @router.message(Command("language_en"))
   async def switch_to_en(message: Message, i18n: I18nContext) -> None:
       await switch_language(message, i18n,"en")


   @router.message(Command("language_ru"))
   async def switch_to_en(message: Message, i18n: I18nContext) -> None:
       await switch_language(message, i18n,"ru")

–ú—ã –≤–∏–¥–∏–º –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞, –Ω–æ —ç—Ç–æ –Ω–µ–∏–∑–±–µ–∂–Ω–æ. –ß–∞—Å—Ç—å –±—ã–ª–æ –≤—ã–Ω–µ—Å–µ–Ω–æ –≤
—Ñ—É–Ω–∫—Ü–∏—é switch_language().

–î–∞–ª–µ–µ –æ—Ç–ø—Ä–∞–≤–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è. –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –±—É–¥—É—Ç –ª–µ–∂–∞—Ç—å –≤
``locale/–∏–º—è_–ª–æ–∫–∞–ª–∏/static/–∏–º—è_–∫–∞—Ä—Ç–∏–Ω–∫–∏_–ª–æ–∫–∞–ª—å.jpg``.

.. code-block:: python

   @router.message(Command("photo"))
   @router.message(F.text == LazyProxy("photo"))
   async def sent_photo(message: Message, i18n: I18nContext) -> None:
       locale_code = i18n.locale
       path_to_photo = f"locales/{locale_code}/static/my_image_{locale_code}.jpg"
       await message.answer_photo(photo=FSInputFile(path_to_photo))

–°–ª–µ–¥—É—é—â–∏–π —Ö—ç–Ω–¥–ª–µ—Ä –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π. –ü—Ä–∏ —ç—Ç–æ–º –æ–Ω
–ø–æ—Å–ª–µ –æ—Ç–≤–µ—Ç –≤—ã–¥–∞–µ—Ç –µ—â–µ –∏ –¥–∞—Ç—É —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ, —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–æ–º –¥–ª—è
–ª–æ–∫–∞–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –¢–æ –µ—Å—Ç—å "–î–µ–Ω—å –ú–µ—Å—è—Ü –ì–æ–¥" –∏–ª–∏ "Month Day, Year".

.. code-block:: python

   @router.message()
   async def handler_common(message: Message, i18n: I18nContext) -> None:
       await message.answer(text=i18n.get("i-dont-know"))
       await message.answer(text=i18n.get("show-date", date_=message.date))

–ù—É –∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞, –∫–æ—Ç–æ—Ä—É—é –º—ã –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–ª–∏ –∏–∑ ``aiogram_i18n.types``

.. code-block:: python

   # –≠—Ç–æ —Ç–µ—Å—Ç–æ–≤–∞—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞
   rkb = ReplyKeyboardMarkup(
       keyboard=[
           [KeyboardButton(text=LazyProxy("help", case="capital"))]  # or L.help()
       ], resize_keyboard=True
   )

–¢–µ–∫—Å—Ç –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –±—É–¥–µ—Ç —Ç–∞–∫–∂–µ –ª–µ–Ω–∏–≤–æ –ø–µ—Ä–µ–≤–µ–¥–µ–Ω –≤ –º–æ–º–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–∫–∏
—Å–æ–æ–±—â–µ–Ω–∏—è, –∫–æ–≥–¥–∞ —É–∂–µ —è–∑—ã–∫ –±—É–¥–µ—Ç –∏–∑–≤–µ—Å—Ç–µ–Ω.

–û—Å—Ç–∞–ª–æ—Å—å —Å–¥–µ–ª–∞—Ç—å —Å–∞–º—É –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—é. –°–∫–ª–∞–¥—ã–≤–∞–µ–º –∫–∞—Ä—Ç–∏–Ω–∫–∏ –≤ –ø–∞–ø–∫–∏ –ª–æ–∫–∞–ª–µ–π.
–ò —Å–æ–∑–¥–∞–µ–º —Ñ–∞–π–ª—ã –ø–µ—Ä–µ–≤–æ–¥–æ–≤ –≤ —Ñ–æ—Ä–º–∞—Ç–µ .ftl –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö –ø–∞–ø–∫–∞—Ö.
–õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã –æ–ø–∏—Å–∞–Ω–∞ –≤ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è—Ö –≤ –∫–∞–∂–¥–æ–º —Ñ–∞–π–ª–µ.

–ê–Ω–≥–ª–∏–π—Å–∫–∏–π –ø–µ—Ä–µ–≤–æ–¥:

.. code-block:: fluent

   # This Source Code Form is subject to the terms of the Mozilla Public
   # License, v. 2.0. If a copy of the MPL was not distributed with this
   # file, You can obtain one at http://mozilla.org/MPL/2.0/.
   # –≠—Ç–æ –±—ã–ª –ø—Ä–∏–º–µ—Ä –ª–∏—Ü–µ–Ω–∑–∏–∏

   ### –§–∞–π–ª –ø—Ä–∏–º–µ—Ä–∞ –ø–µ—Ä–µ–≤–æ–¥–∞ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–∏–π —è–∑—ã–∫
   ### –õ–æ–≥–∏–∫–∞ –ø–µ—Ä–µ–≤–æ–¥–∞ –∏–∑–º–µ–Ω–∏—Ç—Å—è, –Ω–µ –∑–∞—Ç—Ä–∞–≥–∏–≤–∞—è –∫–æ–¥ –∏ –¥—Ä—É–≥–∏–µ –ø–µ—Ä–µ–≤–æ–¥—ã
   ### –° —Ç—Ä–æ–π–Ω–æ–≥–æ —à–∞—Ä–ø–∞ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —É—Ä–æ–≤–Ω—è —Ñ–∞–π–ª–∞

   ## –≠—Ç–æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —É—Ä–æ–≤–Ω—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ –±–ª–æ–∫–æ–≤ –≤ —Ç–µ–∫—Å—Ç–µ. –°–º. –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é.
   ## Hello section

   # –≠—Ç–æ –ø—Ä–∏–º–µ—Ä —Ç–µ—Ä–º–∏–Ω–∞. –¢–µ—Ä–º–∏–Ω –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –¥–µ—Ñ–∏—Å–∞.
   # –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –∫–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–ª–æ –≤ —Ä—É—Å—Å–∫–æ–º –ø–µ—Ä–µ–≤–æ–¥–µ. –ó–¥–µ—Å—å –∂–µ –º—ã –∏–∑–º–µ–Ω–∏–º –ª–æ–≥–∏–∫—É.
   # –ü–∞–¥–µ–∂–∏ –Ω–∞–º –Ω–µ –Ω—É–∂–Ω—ã, –Ω–æ –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è –ø—Ä–∏—Ç—è–∂–∞—Ç–µ–ª—å–Ω–∞—è —Ñ–æ—Ä–º–∞
   -telegram = { $case ->
        *[common] Telegram
         [possessive] Telegram's
       }

   # { $user } - user name, { $language } - language code.
   # –≠—Ç–æ –±—ã–ª–æ –æ–ø–∏—Å–∞–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–ø–∞–¥–∞—é—Ç —Å—é–¥–∞ –∏–∑ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∫–æ–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
   # –¢–µ—Ä–º–∏–Ω –º—ã –±–µ—Ä–µ–º –∏–∑ —ç—Ç–æ–≥–æ –∂–µ —Ñ–∞–π–ª–∞ –ø–µ—Ä–µ–≤–æ–¥–∞,
   # –∏ –≤—Å—Ç–∞–≤–ª—è–µ–º —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º –Ω—É–∂–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è (–≤ –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ –ø–∞–¥–µ–∂–∞).
   hello = Hi, <b>{ $user }</b>!
       { $language ->
        [None] In your { -telegram(case: "common") } client a language isn't set.
               Therefore, everything will be displayed in default language.
       *[any] Your Telegram client is set to { $language }. Therefore, everything will be displayed in this language.
       }

   help = { $case ->
       *[capital] Help
        [lower] help
       }
   help-message =
       <b>Welcome to the bot.</b>
       Our bot can't do anything useful, but it can switch languages with dexterity.

       The following commands are available in the bot:
       /start to start working with the bot.
       /help or just send the word <b><i>help</i></b> to show this message.
       /language_en { switch-to-en }
       /language_ru { switch-to-ru }
       /photo or just send the word <b><i>photo</i></b> to send photo to you.


   # { $language } - language code.
   # The current language is { $language }.
   cur-lang = The current language is: <i>{ $language }</i>

   ## Switch language section

   # –ù–∞–∑–≤–∞–Ω–∏–µ —è–∑—ã–∫–∞ –º—ã –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º –Ω–∞ —Ä–æ–¥–Ω–æ–º —è–∑—ã–∫–µ, —á—Ç–æ–± —á–µ–ª–æ–≤–µ–∫ —É–≤–∏–¥–µ–ª –∑–Ω–∞–∫–æ–º—ã–µ –±—É–∫–≤—ã –∏ –ø–æ–æ–Ω—è–ª, —á—Ç–æ –Ω–µ –≤—Å–µ –ø–æ—Ç–µ—Ä—è–Ω–æ.
   en-lang = English
   ru-lang = –†—É—Å—Å–∫–∏–π
   switch-to-en = Switch the interface to { en-lang }.
   switch-to-ru = Switch the interface to { ru-lang }.
   lang-is-switched = Display language is { en-lang }.

   photo = photo

   ## Common messages section

   i-dont-know = I'm so stupid bot. Make me clever.
   show-date = But look! Pretty date on English: { DATETIME($date_, month: "long", year: "numeric", day: "numeric", weekday: "long") }

–†—É—Å—Å–∫–∏–π –ø–µ—Ä–µ–≤–æ–¥:

.. code-block:: fluent

   # This Source Code Form is subject to the terms of the Mozilla Public
   # License, v. 2.0. If a copy of the MPL was not distributed with this
   # file, You can obtain one at http://mozilla.org/MPL/2.0/.
   # –≠—Ç–æ –±—ã–ª –ø—Ä–∏–º–µ—Ä –ª–∏—Ü–µ–Ω–∑–∏–∏

   ### –§–∞–π–ª –ø—Ä–∏–º–µ—Ä–∞ –ø–µ—Ä–µ–≤–æ–¥–∞ –Ω–∞ —Ä—É—Å—Å–∫–∏–π —è–∑—ã–∫
   ### –í–∞–∂–Ω–æ. –ù–µ –∑–∞–±—É–¥—å –ø–æ–ª–∏—Ç—å –ø–æ–º–∏–¥–æ—Ä—ã...
   ### –° —Ç—Ä–æ–π–Ω–æ–≥–æ —à–∞—Ä–ø–∞ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —É—Ä–æ–≤–Ω—è —Ñ–∞–π–ª–∞

   ## –≠—Ç–æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —É—Ä–æ–≤–Ω—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ –±–ª–æ–∫–æ–≤ –≤ —Ç–µ–∫—Å—Ç–µ. –°–º. –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é.
   ## Hello section

   # –≠—Ç–æ –ø—Ä–∏–º–µ—Ä —Ç–µ—Ä–º–∏–Ω–∞. –¢–µ—Ä–º–∏–Ω –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –¥–µ—Ñ–∏—Å–∞.
   # –¢–µ—Ä–º–∏–Ω—ã –º–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –≤–Ω—É—Ç—Ä–∏ —Å–æ–æ–±—â–µ–Ω–∏–π, —É–∫–∞–∑—ã–≤–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–∞—Ü–∏–∏ –≤ —Å–∫–æ–±–∫–∞—Ö.
   # –¢–æ –µ—Å—Ç—å —ç—Ç–æ –∫–∞–∫ –∞—Ç—Ä–∏–±—É—Ç—ã, –Ω–æ –º—ã –∏—Ö –∑–∞–¥–∞–µ–º –≤ —Ç–µ–∫—Å—Ç–µ –ø–µ—Ä–µ–≤–æ–¥–æ–≤, –∞ –Ω–µ –ø–æ–ª—É—á–∞–µ–º –∏–∑–≤–Ω–µ.
   # –ú—ã –±—É–¥–µ–º –∏–∑–¥–µ–≤–∞—Ç—å—Å—è –Ω–∞–¥ —è–∑—ã–∫–æ–º, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –∫–∞–∫ –∏ —á—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç
   -telegram = {$case ->
       *[nominative] –¢–µ–ª–µ–≥—Ä–∞–º {"{"}Telegram{"}"}
        [genitive] –¢–µ–ª–µ–≥—Ä–∞–º–∞ ({"{"}Telegram'–∞{"}"})
        [dative] –¢–µ–ª–µ–≥—Ä–∞–º—É ({"{"}Telegram'—É{"}"})
        [accusative] –¢–µ–ª–µ–≥—Ä–∞–º ({"{"}Telegram{"}"})
        [instrumental] –¢–µ–ª–µ–≥—Ä–∞–º–æ–º ({"{"}Telegram'–æ–º{"}"})
        [prepositional] –¢–µ–ª–µ–≥—Ä–∞–º–µ ({"{"}Telegram'–µ{"}"})
       }
   # {"}"}  —ç—Ç–æ –ø—Ä–∏–º–µ—Ä —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Å–∏–º–≤–æ–ª–∞.
   # –ü–∞–¥–µ–∂–∏
   # nominative - –∏–º–µ–Ω–∏—Ç–µ–ª—å–Ω—ã–π
   # genitive - —Ä–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π
   # dative - –¥–∞—Ç–µ–ª—å–Ω—ã–π
   # accusative - –≤–∏–Ω–∏—Ç–µ–ª—å–Ω—ã–π
   # instrumental —Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω—ã–π.
   # prepositional - –ø—Ä–µ–¥–ª–æ–∂–Ω—ã–π

   # { $user } - user name, { $language } - language code.
   # –≠—Ç–æ –±—ã–ª–æ –æ–ø–∏—Å–∞–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–ø–∞–¥–∞—é—Ç —Å—é–¥–∞ –∏–∑ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∫–æ–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
   # –¢–µ—Ä–º–∏–Ω –º—ã –±–µ—Ä–µ–º –∏–∑ —ç—Ç–æ–≥–æ –∂–µ —Ñ–∞–π–ª–∞ –ø–µ—Ä–µ–≤–æ–¥–∞,
   # –∏ –≤—Å—Ç–∞–≤–ª—è–µ–º —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º –Ω—É–∂–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è (–≤ –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ –ø–∞–¥–µ–∂–∞).
   hello = –ü—Ä–∏–≤–µ—Ç, <b>{ $user }</b>!
           –£ —Ç–µ–±—è –≤ –∫–ª–∏–µ–Ω—Ç–µ { -telegram(case: "nominative") } { $language ->
        [None] –Ω–µ —É–∫–∞–∑–∞–Ω —è–∑—ã–∫, –ø–æ—ç—Ç–æ–º—É –≤—Å–µ –±—É–¥–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –Ω–∞ —è–∑—ã–∫–µ –ø–æ-—É–º–æ–ª—á–∞–Ω–∏—é.
       *[any] —É–∫–∞–∑–∞–Ω —è–∑—ã–∫ { $language }, –ø–æ—ç—Ç–æ–º—É –≤—Å–µ –±—É–¥–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –Ω–∞ —ç—Ç–æ–º —è–∑—ã–∫–µ.
       }

   # –∞ —Ç–∞–∫ –º—ã –≤—Å—Ç–∞–≤–ª—è–µ–º —Å–∏–º–≤–æ–ª—ã unicode –ø–æ –Ω–æ–º–µ—Ä—É \uHHHH. –ù–∞–ø—Ä–∏–º–µ—Ä,
   # tears-of-joy1 = {"\U01F602"}
   # tears-of-joy2 = üòÇ

   help = { $case ->
       *[capital] –ü–æ–º–æ—â—å
        [lower] –ø–æ–º–æ—â—å
       }

   help-message =
       <b>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –±–æ—Ç–∞.</b>
       –ù–∞—à –±–æ—Ç –Ω–µ —É–º–µ–µ—Ç –Ω–∏—á–µ–≥–æ –ø–æ–ª–µ–∑–Ω–æ–≥–æ, –æ–¥–Ω–∞–∫–æ —Å –ª–æ–≤–∫–æ—Å—Ç—å—é –º–æ–∂–µ—Ç –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å —è–∑—ã–∫.

       –í –±–æ—Ç–µ –¥–æ—Å—Ç—É–ø–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –∫–æ–º–∞–Ω–¥—ã:
       /start —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç–∞—Ç—å —Å –±–æ—Ç–æ–º
       /help –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–ª–æ–≤–æ <b><i>–ø–æ–º–æ—â—å</i></b>, —á—Ç–æ–±—ã –ø–æ–∫–∞–∑–∞—Ç—å —ç—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ
       /language_en { switch-to-en }
       /language_ru { switch-to-ru }
       /photo –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–ª–æ–≤–æ <b><i>—Ñ–æ—Ç–æ</i></b>, —á—Ç–æ–±—ã –ø—Ä–∏—Å–ª–∞—Ç—å –≤–∞–º –∫–∞—Ä—Ç–∏–Ω–∫—É


   # –≠—Ç–æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –ø–æ–¥—Å–∫–∞–∑–∫–∞ –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥—á–∏–∫–æ–≤ (—á—Ç–æ–±—ã –Ω–µ –∏—Å–∫–∞—Ç—å —á—Ç–æ –∑–Ω–∞—á–∞—Ç —ç—Ç–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ –∫–æ–¥–µ,
   # –∫–æ—Ç–æ—Ä—ã–π –Ω–µ —Ñ–∞–∫—Ç ,—á—Ç–æ –æ–Ω–∏ –ø–æ–ª—É—á–∞—Ç, –∞ –µ—Å–ª–∏ –∏ –ø–æ–ª—É—á–∞—Ç, —Ç–æ –Ω–µ –ø–æ–π–º—É—Ç:

   # { $language } - language code.
   # The current language is { $language }.
   cur-lang = –¢–µ–∫—É—â–∏–π —è–∑—ã–∫: <i>{ $language }</i>

   ## Switch language section

   en-lang = English
   ru-lang = –†—É—Å—Å–∫–∏–π
   switch-to-en = –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–∞ { en-lang } —è–∑—ã–∫.

   # –í —Ñ–∏–≥—É—Ä–Ω—ã—Ö —Å–∫–æ–±–∫–∞—Ö –ø—Ä–∏–º–µ—Ä –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏–∏ –æ–¥–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –¥—Ä—É–≥–æ–º.
   switch-to-ru = –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–∞ { ru-lang } —è–∑—ã–∫.
   lang-is-switched = –Ø–∑—ã–∫ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω –Ω–∞ { ru-lang }.

   photo = —Ñ–æ—Ç–æ

   ## Common messages section

   i-dont-know = –Ø —Ç—É–ø–æ–π –±–æ—Ç. –°–¥–µ–ª–∞–π –º–µ–Ω—è —É–º–Ω—ã–º.
   show-date = –ù–æ –ø–æ—Å–º–æ—Ç—Ä–∏! –ö—Ä–∞—Å–∏–≤–∞—è –¥–∞—Ç–∞ –ø–æ –ø—Ä–∞–≤–∏–ª–∞–º –†—É—Å—Å–∫–æ–≥–æ —è–∑—ã–∫–∞: { DATETIME($date_, month: "long", year: "numeric", day: "numeric", weekday: "long") }

–ó–∞–ø—É—Å–∫–∞–µ–º, —Ç–µ—Å—Ç–∏—Ä—É–µ–º.

–ò—Å–ø—Ä–∞–≤–ª—è–µ–º –æ—à–∏–±–∫–∏.
~~~~~~~~~~~~~~~~~~

–ù–∞—à –ø—Ä–æ–µ–∫—Ç —Å–µ—Ä—å–µ–∑–Ω–æ —É—Å–ª–æ–∂–Ω–∏–ª—Å—è –∏ –Ω—É–∂–Ω–æ –ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏
–æ—Ç–ª–∞–¥–∫—É. –í–æ—Ç –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –æ—à–∏–±–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ —á–∞—Å—Ç–æ –≤–æ–∑–Ω–∏–∫–∞—é—Ç.

**aiogram_i18n.exceptions.NoTranslateFileExistsError: files with
extension (.ftl) in folder (locales/ru/LC_MESSAGES) not found** ‚Äî –æ—à–∏–±–∫–∞
–≤–æ–∑–Ω–∏–∫–∞–µ—Ç –∫–æ–≥–¥–∞ —Ñ–∞–π–ª –ø–µ—Ä–µ–≤–æ–¥–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω –ø–æ —É–∫–∞–∑–∞–Ω–Ω–æ–º—É –Ω–∞–º–∏ –ø—É—Ç–∏.

**KeyNotFoundError: Key ‚Äòenter-a-number‚Äô not found** ‚Äî –æ—à–∏–±–∫–∞ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç,
–∫–æ–≥–¥–∞ –≤ –∫–æ–¥–µ –µ—Å—Ç—å –∫–ª—é—á, –∞ –≤ –ø–µ—Ä–µ–≤–æ–¥–µ –µ–≥–æ –Ω–µ—Ç. –ù–∞–ø—Ä–∏–º–µ—Ä, –≤—ã–∑—ã–≤–∞–µ–º
``i18n.get("help")``, –∞ —Ç–∞–∫–æ–π —Å—Ç—Ä–æ—á–∫–∏ ``help`` –Ω–µ—Ç –≤ —Ñ–∞–π–ª–µ –ø–µ—Ä–µ–≤–æ–¥–∞
—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–≥–æ —è–∑—ã–∫–∞.

**fluent.runtime.errors.FluentReferenceError: Unknown external: user** ‚Äî
—Ç–∞–∫–∞—è –æ—à–∏–±–∫–∞ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç, –∫–æ–≥–¥–∞ –≤—ã –∑–∞–±—ã–≤–∞–µ—Ç–µ –ø–µ—Ä–µ–¥–∞—Ç—å –≤ –≤—ã–∑–æ–≤–µ —Ñ—É–Ω–∫—Ü–∏–∏
–æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∫–æ–¥–∞ –Ω—É–∂–Ω—ã–π –∞—Ä–≥—É–º–µ–Ω—Ç –¥–ª—è –∫–ª—é—á–∞. –ù–∞–ø—Ä–∏–º–µ—Ä, –≤ –Ω–∞—à–µ–º –ø–µ—Ä–µ–≤–æ–¥–µ
–µ—Å—Ç—å —Ç–∞–∫–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ:

.. code-block:: fluent

   hello = –ü—Ä–∏–≤–µ—Ç, <b>{ $user }</b>!
       –£ —Ç–µ–±—è –≤ –∫–ª–∏–µ–Ω—Ç–µ { -telegram(case: "nominative") } { $language ->
       [None] –Ω–µ —É–∫–∞–∑–∞–Ω —è–∑—ã–∫, –ø–æ—ç—Ç–æ–º—É –≤—Å–µ –±—É–¥–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –Ω–∞ —è–∑—ã–∫–µ –ø–æ-—É–º–æ–ª—á–∞–Ω–∏—é.
      *[any] —É–∫–∞–∑–∞–Ω —è–∑—ã–∫ { $language }, –ø–æ—ç—Ç–æ–º—É –≤—Å–µ –±—É–¥–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –Ω–∞ —ç—Ç–æ–º —è–∑—ã–∫–µ.
       }

–ó–¥–µ—Å—å ``{ -telegram }`` ‚Äì —ç—Ç–æ —Ç–µ—Ä–º–∏–Ω. –ò –æ–Ω —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è
–∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–µ–π\ ``(case: "nominative")`` —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ —è–∑—ã–∫–æ–≤–æ–≥–æ —Ñ–∞–π–ª–∞. –ê
–≤–æ—Ç –¥–∞–ª—å—à–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∞—Ä–≥—É–º–µ–Ω—Ç—ã ``{ $user }`` –∏ ``{ $language }``,
–∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å –∏–∑ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∫–æ–¥–∞. –ú—ã –∏—Ö –ø–µ—Ä–µ–¥–∞–µ–º –∫–∞–∫ –∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–µ
–∞—Ä–≥—É–º–µ–Ω—Ç—ã:

.. code-block:: python

   await message.answer(text=i18n.get("hello", user=name, language=i18n.locale))

–∏–ª–∏ –µ—â–µ –≤–æ–∑–º–æ–∂–µ–Ω —Ç–∞–∫–æ–π —Å–ø–æ—Å–æ–±:

.. code-block:: python

   await message.answer(text=i18n.hello(user=name, language=i18n.locale))

–¢–∞–∫ –≤–æ—Ç –≤ —Å–ª—É—á–∞–µ, –µ—Å–ª–∏ –º—ã –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ —É–∫–∞–∑–∞–ª–∏ –∞—Ä–≥—É–º–µ–Ω—Ç –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –∫–æ–¥–µ
(–Ω–∞–ø—Ä–∏–º–µ—Ä ``nmae`` –≤–º–µ—Å—Ç–æ ``name``) –∏–ª–∏ –≤–æ–æ–±—â–µ –Ω–µ —É–∫–∞–∑–∞–ª–∏, —Ç–æ –≤–æ –≤—Ä–µ–º—è
–∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –ø–µ—Ä–µ–≤–æ–¥–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ –∏ –≤—ã–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–∫—É.
